{"ast":null,"code":"import e from \"@bundled-es-modules/pdfjs-dist/build/pdf\";\nimport t, { useRef as r, useEffect as o, useState as a, useMemo as c } from \"react\";\nconst n = _ref => {\n  let {\n    file: e,\n    onDocumentComplete: a,\n    page: c,\n    scale: n,\n    rotate: s,\n    cMapUrl: i,\n    cMapPacked: d,\n    workerSrc: p,\n    withCredentials: h\n  } = _ref;\n  const u = r(null),\n    [, w] = l({\n      canvasEl: u,\n      file: e,\n      page: c,\n      scale: n,\n      rotate: s,\n      cMapUrl: i,\n      cMapPacked: d,\n      workerSrc: p,\n      withCredentials: h\n    });\n  return o(() => {\n    a(w);\n  }, [w]), t.createElement(\"canvas\", {\n    ref: u\n  });\n};\nn.defaultProps = {\n  onDocumentComplete: () => {}\n};\nconst l = _ref2 => {\n  let {\n    canvasEl: t,\n    file: r,\n    scale: n = 1,\n    rotate: l = 0,\n    page: s = 1,\n    cMapUrl: i,\n    cMapPacked: d,\n    workerSrc: p = \"//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.1.266/pdf.worker.js\",\n    withCredentials: h = !1\n  } = _ref2;\n  const [u, w] = a();\n  o(() => {\n    e.GlobalWorkerOptions.workerSrc = p;\n  }, []), o(() => {\n    const t = {\n      url: r,\n      withCredentials: h\n    };\n    i && (t.cMapUrl = i, t.cMapPacked = d), e.getDocument(t).promise.then(w);\n  }, [r, h]), o(() => {\n    u && u.getPage(s).then(e => f(e));\n  }, [u, s, n, l, t]);\n  const f = e => {\n      const r = 0 === l ? e.rotate : e.rotate + l;\n      let o = 1;\n      o = window.devicePixelRatio;\n      const a = n * o,\n        c = e.getViewport({\n          scale: a,\n          rotation: r\n        }),\n        s = t.current;\n      if (!s) return;\n      const i = s.getContext(\"2d\");\n      s.style.width = `${c.width / o}px`, s.style.height = `${c.height / o}px`, s.height = c.height, s.width = c.width;\n      const d = {\n        canvasContext: i,\n        viewport: c\n      };\n      e.render(d);\n    },\n    m = c(() => !u, [u]),\n    g = c(() => u ? u._pdfInfo.numPages : null, [u]);\n  return [m, g];\n};\nexport default n;\nexport { l as usePdf };","map":{"version":3,"names":["n","_ref","file","e","onDocumentComplete","a","page","c","scale","rotate","s","cMapUrl","i","cMapPacked","d","workerSrc","p","withCredentials","h","u","r","w","l","canvasEl","o","t","createElement","ref","defaultProps","_ref2","GlobalWorkerOptions","url","getDocument","promise","then","getPage","f","window","devicePixelRatio","getViewport","rotation","current","getContext","style","width","height","canvasContext","viewport","render","m","g","_pdfInfo","numPages","usePdf"],"sources":["C:\\Users\\vedic\\node_modules\\react-pdf-js\\src\\index.tsx"],"sourcesContent":["import pdfjs from '@bundled-es-modules/pdfjs-dist/build/pdf';\nimport React, { useState, useEffect, useRef, useMemo } from 'react';\n\ntype ComponentProps = {\n  file: string;\n  onDocumentComplete: (numPages: number) => void;\n  page?: number;\n  scale?: number;\n  rotate?: number;\n  cMapUrl?: string;\n  cMapPacked?: boolean;\n  workerSrc?: string;\n  withCredentials?: boolean;\n};\n\nconst Pdf = ({\n  file,\n  onDocumentComplete,\n  page,\n  scale,\n  rotate,\n  cMapUrl,\n  cMapPacked,\n  workerSrc,\n  withCredentials,\n}: ComponentProps) => {\n  const canvasEl = useRef<HTMLCanvasElement>(null);\n  const [, numPages] = usePdf({\n    canvasEl,\n    file,\n    page,\n    scale,\n    rotate,\n    cMapUrl,\n    cMapPacked,\n    workerSrc,\n    withCredentials,\n  });\n\n  useEffect(() => {\n    onDocumentComplete(numPages);\n  }, [numPages]);\n\n  return <canvas ref={canvasEl} />;\n};\n\nPdf.defaultProps = {\n  onDocumentComplete: () => {},\n};\n\ntype HookProps = {\n  canvasEl: React.RefObject<HTMLCanvasElement>;\n  file: string;\n  scale?: number;\n  rotate?: number;\n  page?: number;\n  cMapUrl?: string;\n  cMapPacked?: boolean;\n  workerSrc?: string;\n  withCredentials?: boolean;\n};\n\nexport const usePdf = ({\n  canvasEl,\n  file,\n  scale = 1,\n  rotate = 0,\n  page = 1,\n  cMapUrl,\n  cMapPacked,\n  workerSrc = '//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.1.266/pdf.worker.js',\n  withCredentials = false,\n}: HookProps) => {\n  const [pdf, setPdf] = useState();\n\n  useEffect(() => {\n    pdfjs.GlobalWorkerOptions.workerSrc = workerSrc;\n  }, []);\n\n  useEffect(() => {\n    const config: pdfjs.PDFSource = { url: file, withCredentials };\n    if (cMapUrl) {\n      config.cMapUrl = cMapUrl;\n      config.cMapPacked = cMapPacked;\n    }\n    pdfjs.getDocument(config).promise.then(setPdf);\n  }, [file, withCredentials]);\n\n  // handle changes\n  useEffect(() => {\n    if (pdf) {\n      pdf.getPage(page).then((p: any) => drawPDF(p));\n    }\n  }, [pdf, page, scale, rotate, canvasEl]);\n\n  // draw a page of the pdf\n  const drawPDF = (page: any) => {\n    // Because this page's rotation option overwrites pdf default rotation value,\n    // calculating page rotation option value from pdf default and this component prop rotate.\n    const rotation = rotate === 0 ? page.rotate : page.rotate + rotate;\n    let dpRatio = 1;\n    dpRatio = window.devicePixelRatio;\n    const adjustedScale = scale * dpRatio;\n    const viewport = page.getViewport({ scale: adjustedScale, rotation });\n    const canvas = canvasEl.current;\n    if (!canvas) {\n      return;\n    }\n    const canvasContext = canvas.getContext('2d');\n    canvas.style.width = `${viewport.width / dpRatio}px`;\n    canvas.style.height = `${viewport.height / dpRatio}px`;\n    canvas.height = viewport.height;\n    canvas.width = viewport.width;\n    const renderContext = {\n      canvasContext,\n      viewport,\n    };\n    page.render(renderContext);\n  };\n\n  const loading = useMemo(() => !pdf, [pdf]);\n  const numPages = useMemo(() => (pdf ? pdf._pdfInfo.numPages : null), [pdf]);\n\n  return [loading, numPages];\n};\n\nexport default Pdf;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}