{"ast":null,"code":"import _defineProperty from\"C:/Users/vedic/OneDrive/Desktop/webDev/mainsite/studentManagement-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/vedic/OneDrive/Desktop/webDev/mainsite/studentManagement-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/vedic/OneDrive/Desktop/webDev/mainsite/studentManagement-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./Login.css';import{useState}from'react';import{useNavigate}from'react-router-dom';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var BACKENDSERVER=\"https://vedicvarma.com\";var toasty={position:\"top-right\",autoClose:5000,hideProgressBar:false,closeOnClick:true,draggable:true,progress:undefined,theme:\"colored\"};var navigate=useNavigate();var _useState=useState({username:'',password:''}),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var handleChange=function handleChange(e){setInput(function(values){return _objectSpread(_objectSpread({},values),{},_defineProperty({},e.target.name,e.target.value));});};var toastifyError=function toastifyError(msg){toast.error(msg,{position:\"top-left\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:false,progress:undefined,theme:\"colored\"});};var handleSubmit=function handleSubmit(e){e.preventDefault();//console.log(input)\nvar status,body;var response=fetch(\"\".concat(BACKENDSERVER,\"/api/students/login\"),{method:'POST',body:JSON.stringify(input),headers:{'Content-Type':'application/json'}});response.then(function(res){return res.json().then(function(data){status=res.status;body=data;if(status===200){localStorage.setItem('token',body.token);navigate('/projects/studentManagement/dashboard');//Naviages to the /dashboard page\n}else{console.log(body);toastifyError(\"\".concat(status,\": \").concat(body.message));document.getElementById(\"password\").value=\"\";}});}).catch(function(err){toast.error(\"\".concat(response.status,\" : \").concat(err),toasty);console.log(err);});};return/*#__PURE__*/_jsxs(\"div\",{id:\"login-root\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"User\"}),/*#__PURE__*/_jsx(\"input\",{name:\"username\",type:\"text\",id:\"username\",onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",id:\"password\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});}export default Login;","map":{"version":3,"names":["useState","useNavigate","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","Login","BACKENDSERVER","toasty","position","autoClose","hideProgressBar","closeOnClick","draggable","progress","undefined","theme","navigate","_useState","username","password","_useState2","_slicedToArray","input","setInput","handleChange","e","values","_objectSpread","_defineProperty","target","name","value","toastifyError","msg","error","pauseOnHover","handleSubmit","preventDefault","status","body","response","fetch","concat","method","JSON","stringify","headers","then","res","json","data","localStorage","setItem","token","console","log","message","document","getElementById","catch","err","id","children","onSubmit","type","onChange","htmlFor"],"sources":["C:/Users/vedic/OneDrive/Desktop/webDev/mainsite/studentManagement-frontend/src/pages/Login.js"],"sourcesContent":["import './Login.css';\r\nimport { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nfunction Login() {\r\n  const BACKENDSERVER = \"https://vedicvarma.com\";\r\n  const toasty =  {position: \"top-right\",autoClose: 5000,hideProgressBar: false,closeOnClick: true,draggable: true,progress: undefined,theme: \"colored\",}\r\n  const navigate = useNavigate()\r\n  const  [input, setInput] = useState({username: '', password: ''})\r\n\r\n  const handleChange = (e) => {\r\n    setInput(values => ({...values, [e.target.name]: e.target.value}))\r\n  }\r\n\r\n  const toastifyError = (msg) => {\r\n    toast.error(msg, {\r\n      position: \"top-left\",\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: false,\r\n      progress: undefined,\r\n      theme: \"colored\",\r\n      });\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    //console.log(input)\r\n    var status,body;\r\n    var response = fetch(`${BACKENDSERVER}/api/students/login`, {method: 'POST', body: JSON.stringify(input), headers: {'Content-Type': 'application/json'}})\r\n    response.then(res => res.json().then(data => {\r\n      status= res.status;\r\n      body= data;\r\n      if (status === 200) {\r\n        localStorage.setItem('token', body.token);\r\n        navigate('/projects/studentManagement/dashboard');//Naviages to the /dashboard page\r\n      }\r\n      else {\r\n          console.log(body);\r\n          toastifyError(`${status}: ${body.message}`);\r\n          document.getElementById(\"password\").value = \"\";\r\n        }}))\r\n      .catch(err => {\r\n        toast.error(`${response.status} : ${err}`,toasty);\r\n        console.log(err);});\r\n  }\r\n  \r\n  return (\r\n    <div id=\"login-root\">\r\n      <h1>Login</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <label >User</label>\r\n        <input name='username' type=\"text\" id=\"username\" onChange={handleChange} />\r\n        <label htmlFor=\"password\">Password</label>\r\n        <input name='password' type=\"password\" id=\"password\" onChange={handleChange}/>\r\n        <button type=\"submit\">Login</button>\r\n      </form>\r\n      <ToastContainer />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}