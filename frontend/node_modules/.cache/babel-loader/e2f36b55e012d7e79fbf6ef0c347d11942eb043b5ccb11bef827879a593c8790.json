{"ast":null,"code":"import _defineProperty from\"C:/Users/vedic/OneDrive/Desktop/webDev/studentManagement/test-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/vedic/OneDrive/Desktop/webDev/studentManagement/test-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/vedic/OneDrive/Desktop/webDev/studentManagement/test-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./Login.css';import{useState}from'react';import{useNavigate}from'react-router-dom';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var navigate=useNavigate();var _useState=useState({username:'',password:''}),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var handleChange=function handleChange(e){setInput(function(values){return _objectSpread(_objectSpread({},values),{},_defineProperty({},e.target.name,e.target.value));});};var toastifyError=function toastifyError(msg){toast.error(msg,{position:\"top-left\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:false,progress:undefined,theme:\"colored\"});};var handleSubmit=function handleSubmit(e){e.preventDefault();//console.log(input)\nvar status,body;var response=fetch('http://localhost:3001/api/login',{method:'POST',body:JSON.stringify(input),headers:{'Content-Type':'application/json'}});response.then(function(res){return res.json().then(function(data){status=res.status;body=data;if(status===200){localStorage.setItem('token',body.token);navigate('/dashboard');}else{console.log(body);toastifyError(\"\".concat(status,\": \").concat(body.error));document.getElementById(\"password\").value=\"\";}});}).catch(function(err){return console.log(err);});};return/*#__PURE__*/_jsxs(\"div\",{id:\"login-root\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"User\"}),/*#__PURE__*/_jsx(\"input\",{name:\"username\",type:\"text\",id:\"username\",onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",id:\"password\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});}export default Login;","map":{"version":3,"names":["useState","useNavigate","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","Login","navigate","_useState","username","password","_useState2","_slicedToArray","input","setInput","handleChange","e","values","_objectSpread","_defineProperty","target","name","value","toastifyError","msg","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","handleSubmit","preventDefault","status","body","response","fetch","method","JSON","stringify","headers","then","res","json","data","localStorage","setItem","token","console","log","concat","document","getElementById","catch","err","id","children","onSubmit","type","onChange","htmlFor"],"sources":["C:/Users/vedic/OneDrive/Desktop/webDev/studentManagement/test-app/src/pages/Login.js"],"sourcesContent":["import './Login.css';\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nfunction Login() {\n  const navigate = useNavigate()\n  const  [input, setInput] = useState({username: '', password: ''})\n\n  const handleChange = (e) => {\n    setInput(values => ({...values, [e.target.name]: e.target.value}))\n  }\n\n  const toastifyError = (msg) => {\n    toast.error(msg, {\n      position: \"top-left\",\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: false,\n      progress: undefined,\n      theme: \"colored\",\n      });\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    //console.log(input)\n    var status,body;\n    var response = fetch('http://localhost:3001/api/login', {method: 'POST', body: JSON.stringify(input), headers: {'Content-Type': 'application/json'}})\n    response.then(res => res.json().then(data => {\n      status= res.status;\n      body= data;\n      if (status === 200) {\n        localStorage.setItem('token', body.token);\n        navigate('/dashboard');\n      }\n      else {\n          console.log(body);\n          toastifyError(`${status}: ${body.error}`);\n          document.getElementById(\"password\").value = \"\";\n        }}))\n      .catch(err => console.log(err));\n  }\n  \n  return (\n    <div id=\"login-root\">\n      <h1>Login</h1>\n      <form onSubmit={handleSubmit}>\n        <label >User</label>\n        <input name='username' type=\"text\" id=\"username\" onChange={handleChange} />\n        <label htmlFor=\"password\">Password</label>\n        <input name='password' type=\"password\" id=\"password\" onChange={handleChange}/>\n        <button type=\"submit\">Login</button>\n      </form>\n      <ToastContainer />\n    </div>\n  )\n}\n\nexport default Login"],"mappings":"scAAA,MAAO,aAAa,CACpB,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,cAAc,CAAEC,KAAK,KAAQ,gBAAgB,CACtD,MAAO,uCAAuC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/C,QAAS,CAAAC,KAAKA,CAAA,CAAG,CACf,GAAM,CAAAC,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,IAAAS,SAAA,CAA2BV,QAAQ,CAAC,CAACW,QAAQ,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAE,CAAC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAJ,SAAA,IAAzDK,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IAEvB,GAAM,CAAAI,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,CAAC,CAAK,CAC1BF,QAAQ,CAAC,SAAAG,MAAM,SAAAC,aAAA,CAAAA,aAAA,IAASD,MAAM,KAAAE,eAAA,IAAGH,CAAC,CAACI,MAAM,CAACC,IAAI,CAAGL,CAAC,CAACI,MAAM,CAACE,KAAK,IAAE,CAAC,CACpE,CAAC,CAED,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,GAAG,CAAK,CAC7BvB,KAAK,CAACwB,KAAK,CAACD,GAAG,CAAE,CACfE,QAAQ,CAAE,UAAU,CACpBC,SAAS,CAAE,IAAI,CACfC,eAAe,CAAE,KAAK,CACtBC,YAAY,CAAE,IAAI,CAClBC,YAAY,CAAE,IAAI,CAClBC,SAAS,CAAE,KAAK,CAChBC,QAAQ,CAAEC,SAAS,CACnBC,KAAK,CAAE,SACP,CAAC,CAAC,CACN,CAAC,CAED,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAInB,CAAC,CAAK,CAC1BA,CAAC,CAACoB,cAAc,CAAC,CAAC,CAClB;AACA,GAAI,CAAAC,MAAM,CAACC,IAAI,CACf,GAAI,CAAAC,QAAQ,CAAGC,KAAK,CAAC,iCAAiC,CAAE,CAACC,MAAM,CAAE,MAAM,CAAEH,IAAI,CAAEI,IAAI,CAACC,SAAS,CAAC9B,KAAK,CAAC,CAAE+B,OAAO,CAAE,CAAC,cAAc,CAAE,kBAAkB,CAAC,CAAC,CAAC,CACrJL,QAAQ,CAACM,IAAI,CAAC,SAAAC,GAAG,QAAI,CAAAA,GAAG,CAACC,IAAI,CAAC,CAAC,CAACF,IAAI,CAAC,SAAAG,IAAI,CAAI,CAC3CX,MAAM,CAAES,GAAG,CAACT,MAAM,CAClBC,IAAI,CAAEU,IAAI,CACV,GAAIX,MAAM,GAAK,GAAG,CAAE,CAClBY,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEZ,IAAI,CAACa,KAAK,CAAC,CACzC5C,QAAQ,CAAC,YAAY,CAAC,CACxB,CAAC,IACI,CACD6C,OAAO,CAACC,GAAG,CAACf,IAAI,CAAC,CACjBf,aAAa,IAAA+B,MAAA,CAAIjB,MAAM,OAAAiB,MAAA,CAAKhB,IAAI,CAACb,KAAK,CAAE,CAAC,CACzC8B,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC,CAAClC,KAAK,CAAG,EAAE,CAChD,CAAC,CAAC,CAAC,GAAC,CACLmC,KAAK,CAAC,SAAAC,GAAG,QAAI,CAAAN,OAAO,CAACC,GAAG,CAACK,GAAG,CAAC,GAAC,CACnC,CAAC,CAED,mBACErD,KAAA,QAAKsD,EAAE,CAAC,YAAY,CAAAC,QAAA,eAClBzD,IAAA,OAAAyD,QAAA,CAAI,OAAK,CAAI,CAAC,cACdvD,KAAA,SAAMwD,QAAQ,CAAE1B,YAAa,CAAAyB,QAAA,eAC3BzD,IAAA,UAAAyD,QAAA,CAAQ,MAAI,CAAO,CAAC,cACpBzD,IAAA,UAAOkB,IAAI,CAAC,UAAU,CAACyC,IAAI,CAAC,MAAM,CAACH,EAAE,CAAC,UAAU,CAACI,QAAQ,CAAEhD,YAAa,CAAE,CAAC,cAC3EZ,IAAA,UAAO6D,OAAO,CAAC,UAAU,CAAAJ,QAAA,CAAC,UAAQ,CAAO,CAAC,cAC1CzD,IAAA,UAAOkB,IAAI,CAAC,UAAU,CAACyC,IAAI,CAAC,UAAU,CAACH,EAAE,CAAC,UAAU,CAACI,QAAQ,CAAEhD,YAAa,CAAC,CAAC,cAC9EZ,IAAA,WAAQ2D,IAAI,CAAC,QAAQ,CAAAF,QAAA,CAAC,OAAK,CAAQ,CAAC,EAChC,CAAC,cACPzD,IAAA,CAACH,cAAc,GAAE,CAAC,EACf,CAAC,CAEV,CAEA,cAAe,CAAAM,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}