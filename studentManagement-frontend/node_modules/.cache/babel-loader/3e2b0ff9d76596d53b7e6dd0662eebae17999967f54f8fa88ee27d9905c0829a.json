{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.filters = void 0;\nvar nth_check_1 = __importDefault(require(\"nth-check\"));\nvar boolbase_1 = __importDefault(require(\"boolbase\"));\nfunction getChildFunc(next, adapter) {\n  return function (elem) {\n    var parent = adapter.getParent(elem);\n    return parent != null && adapter.isTag(parent) && next(elem);\n  };\n}\nexports.filters = {\n  contains: function (next, text, _a) {\n    var adapter = _a.adapter;\n    return function contains(elem) {\n      return next(elem) && adapter.getText(elem).includes(text);\n    };\n  },\n  icontains: function (next, text, _a) {\n    var adapter = _a.adapter;\n    var itext = text.toLowerCase();\n    return function icontains(elem) {\n      return next(elem) && adapter.getText(elem).toLowerCase().includes(itext);\n    };\n  },\n  // Location specific methods\n  \"nth-child\": function (next, rule, _a) {\n    var adapter = _a.adapter,\n      equals = _a.equals;\n    var func = (0, nth_check_1.default)(rule);\n    if (func === boolbase_1.default.falseFunc) return boolbase_1.default.falseFunc;\n    if (func === boolbase_1.default.trueFunc) return getChildFunc(next, adapter);\n    return function nthChild(elem) {\n      var siblings = adapter.getSiblings(elem);\n      var pos = 0;\n      for (var i = 0; i < siblings.length; i++) {\n        if (equals(elem, siblings[i])) break;\n        if (adapter.isTag(siblings[i])) {\n          pos++;\n        }\n      }\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-last-child\": function (next, rule, _a) {\n    var adapter = _a.adapter,\n      equals = _a.equals;\n    var func = (0, nth_check_1.default)(rule);\n    if (func === boolbase_1.default.falseFunc) return boolbase_1.default.falseFunc;\n    if (func === boolbase_1.default.trueFunc) return getChildFunc(next, adapter);\n    return function nthLastChild(elem) {\n      var siblings = adapter.getSiblings(elem);\n      var pos = 0;\n      for (var i = siblings.length - 1; i >= 0; i--) {\n        if (equals(elem, siblings[i])) break;\n        if (adapter.isTag(siblings[i])) {\n          pos++;\n        }\n      }\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-of-type\": function (next, rule, _a) {\n    var adapter = _a.adapter,\n      equals = _a.equals;\n    var func = (0, nth_check_1.default)(rule);\n    if (func === boolbase_1.default.falseFunc) return boolbase_1.default.falseFunc;\n    if (func === boolbase_1.default.trueFunc) return getChildFunc(next, adapter);\n    return function nthOfType(elem) {\n      var siblings = adapter.getSiblings(elem);\n      var pos = 0;\n      for (var i = 0; i < siblings.length; i++) {\n        var currentSibling = siblings[i];\n        if (equals(elem, currentSibling)) break;\n        if (adapter.isTag(currentSibling) && adapter.getName(currentSibling) === adapter.getName(elem)) {\n          pos++;\n        }\n      }\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-last-of-type\": function (next, rule, _a) {\n    var adapter = _a.adapter,\n      equals = _a.equals;\n    var func = (0, nth_check_1.default)(rule);\n    if (func === boolbase_1.default.falseFunc) return boolbase_1.default.falseFunc;\n    if (func === boolbase_1.default.trueFunc) return getChildFunc(next, adapter);\n    return function nthLastOfType(elem) {\n      var siblings = adapter.getSiblings(elem);\n      var pos = 0;\n      for (var i = siblings.length - 1; i >= 0; i--) {\n        var currentSibling = siblings[i];\n        if (equals(elem, currentSibling)) break;\n        if (adapter.isTag(currentSibling) && adapter.getName(currentSibling) === adapter.getName(elem)) {\n          pos++;\n        }\n      }\n      return func(pos) && next(elem);\n    };\n  },\n  // TODO determine the actual root element\n  root: function (next, _rule, _a) {\n    var adapter = _a.adapter;\n    return function (elem) {\n      var parent = adapter.getParent(elem);\n      return (parent == null || !adapter.isTag(parent)) && next(elem);\n    };\n  },\n  scope: function (next, rule, options, context) {\n    var equals = options.equals;\n    if (!context || context.length === 0) {\n      // Equivalent to :root\n      return exports.filters[\"root\"](next, rule, options);\n    }\n    if (context.length === 1) {\n      // NOTE: can't be unpacked, as :has uses this for side-effects\n      return function (elem) {\n        return equals(context[0], elem) && next(elem);\n      };\n    }\n    return function (elem) {\n      return context.includes(elem) && next(elem);\n    };\n  },\n  hover: dynamicStatePseudo(\"isHovered\"),\n  visited: dynamicStatePseudo(\"isVisited\"),\n  active: dynamicStatePseudo(\"isActive\")\n};\n/**\n * Dynamic state pseudos. These depend on optional Adapter methods.\n *\n * @param name The name of the adapter method to call.\n * @returns Pseudo for the `filters` object.\n */\nfunction dynamicStatePseudo(name) {\n  return function dynamicPseudo(next, _rule, _a) {\n    var adapter = _a.adapter;\n    var func = adapter[name];\n    if (typeof func !== \"function\") {\n      return boolbase_1.default.falseFunc;\n    }\n    return function active(elem) {\n      return func(elem) && next(elem);\n    };\n  };\n}","map":{"version":3,"names":["nth_check_1","__importDefault","require","boolbase_1","getChildFunc","next","adapter","elem","parent","getParent","isTag","exports","filters","contains","text","_a","getText","includes","icontains","itext","toLowerCase","nth-child","rule","equals","func","default","falseFunc","trueFunc","nthChild","siblings","getSiblings","pos","i","length","nth-last-child","nthLastChild","nth-of-type","nthOfType","currentSibling","getName","nth-last-of-type","nthLastOfType","root","_rule","scope","options","context","hover","dynamicStatePseudo","visited","active","name","dynamicPseudo"],"sources":["https://raw.githubusercontent.com/fb55/css-select/0f0725a9dfeddd2fdb54eda9656cdbab5bbf6be6/src/pseudo-selectors/filters.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}