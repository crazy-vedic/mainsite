[{"C:\\Users\\vedic\\OneDrive\\Desktop\\webDev\\mainsite\\studentManagement-frontend\\src\\index.js":"1","C:\\Users\\vedic\\OneDrive\\Desktop\\webDev\\mainsite\\studentManagement-frontend\\src\\pages\\404.js":"2","C:\\Users\\vedic\\OneDrive\\Desktop\\webDev\\mainsite\\studentManagement-frontend\\src\\pages\\Dashboard.js":"3","C:\\Users\\vedic\\OneDrive\\Desktop\\webDev\\mainsite\\studentManagement-frontend\\src\\pages\\Login.js":"4"},{"size":929,"mtime":1693480116334,"results":"5","hashOfConfig":"6"},{"size":290,"mtime":1690948516151,"results":"7","hashOfConfig":"6"},{"size":12620,"mtime":1693071839110,"results":"8","hashOfConfig":"6"},{"size":2275,"mtime":1693076406115,"results":"9","hashOfConfig":"6"},{"filePath":"10","messages":"11","suppressedMessages":"12","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1glw1ko",{"filePath":"13","messages":"14","suppressedMessages":"15","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"16","messages":"17","suppressedMessages":"18","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"19"},{"filePath":"20","messages":"21","suppressedMessages":"22","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\vedic\\OneDrive\\Desktop\\webDev\\mainsite\\studentManagement-frontend\\src\\index.js",[],[],"C:\\Users\\vedic\\OneDrive\\Desktop\\webDev\\mainsite\\studentManagement-frontend\\src\\pages\\404.js",[],[],"C:\\Users\\vedic\\OneDrive\\Desktop\\webDev\\mainsite\\studentManagement-frontend\\src\\pages\\Dashboard.js",["23","24"],[],"import { useEffect, useState } from 'react';\r\nimport './Dashboard.css';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport React from 'react';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nfunction Dashboard() {\r\n  const BACKENDSERVER = \"https://vedicvarma.com\";\r\n  const toasty =  {position: \"top-right\",autoClose: 5000,hideProgressBar: false,closeOnClick: true,draggable: true,progress: undefined,theme: \"colored\",}\r\n  var token = localStorage.getItem('token');\r\n  const [students, setStudents] = useState([]);\r\n  const [addStudent, setAddStudent] = useState({show:false,name:null, _id: NaN, joining: null, gpa: null, section: null,program:null});\r\n  const [updateStudents, setUpdateStudents] = useState([]);\r\n  function clearAddData() {\r\n    setAddStudent(prevState => ({...prevState,show:false,name:null, joining: null, gpa: null, section: null,program:null}))\r\n    document.querySelectorAll(\"input.add-student\").forEach((input) => input.value = \"\")\r\n  }\r\n  function fetchStudents() {\r\n    console.log(\"fetching students\")\r\n    token = localStorage.getItem('token');\r\n    var response\r\n    fetch(`${BACKENDSERVER}/api/students/search`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json',\r\n    'Authorization':`${token}`},\r\n    body: JSON.stringify({sort: {_id: -1},limit:10})\r\n    })\r\n      .then(res => {response=res;return res.json();})\r\n      .then(data => setStudents(prevState => {return data.map((student) => {\r\n        if (prevState===undefined) {\r\n          return {...student,checked:false,settings:false}\r\n        }\r\n        var prevStudent = (prevState.find((prevStudent) => prevStudent._id === student._id))||({checked:false,settings:false});\r\n        var tempstudent = {...student};\r\n        tempstudent.checked=prevStudent.checked||false;\r\n        tempstudent.settings=prevStudent.settings||false;\r\n        return tempstudent;})}))\r\n      .catch(err => {\r\n        if (response.status===403) {\r\n          toast.error(`Unauthorized :\\n${<Link to=\"'/projects/studentManagement'\">Please login again from the login page.</Link>}`,toasty);\r\n        }else{\r\n        toast.error(`${response.status} : ${err}`,toasty);\r\n        console.log(err);}});\r\n  }\r\n  useEffect(() => {\r\n    fetchStudents();\r\n    //getLastId();\r\n\r\n    const timer = setInterval(() => {\r\n      fetchStudents();\r\n    }, 10000);\r\n\r\n    return () => {\r\n      clearInterval(timer);\r\n    };\r\n  }, []);\r\n  function handleAddStudent(event) {\r\n    const {id,value} = event.target\r\n    setAddStudent(prevState=>({...prevState,[id]:value}))\r\n  }\r\n  function getLastId() {\r\n    token = localStorage.getItem('token');\r\n    fetch(`${BACKENDSERVER}/api/students/search`, {method: 'POST', headers: { 'Content-Type': 'application/json',\r\n    'Authorization':`${token}` },body: JSON.stringify({sort: {_id: -1},limit:1})})\r\n  .then(res => res.json())\r\n  .then(info => {\r\n    setAddStudent(prevState=>({...prevState,_id:info[0]._id+1}))\r\n    console.log(\"get last id\");\r\n    return })\r\n  }\r\n  function handleUpdateStudent(event,SID) {\r\n    const {value} = event.target\r\n    const target = event.target.getAttribute(\"target\")\r\n    setUpdateStudents(prevState=>{return prevState.map((student) => {\r\n      if (student._id===SID) {\r\n        return {...student,[target]:value}\r\n      }\r\n      return student;\r\n    })})\r\n    console.log(updateStudents)\r\n  }\r\n  function fetchUpdateStudents(SID) {\r\n    var response;\r\n    token = localStorage.getItem('token');\r\n    fetch(`${BACKENDSERVER}/api/students/${SID}`, {method: 'PUT', headers: { 'Content-Type': 'application/json',\r\n    'Authorization':`${token}` },body: JSON.stringify(Array.from(updateStudents.filter((student) => student._id===SID))[0])})\r\n  .then(res => {response=res;return res.json();})\r\n  .then(info => {if (response.status===200) {\r\n    toast.success(info.message,toasty)\r\n    document.getElementById('updateCancel').click();\r\n    fetchStudents();}\r\n    else {\r\n      toast.error(info.message,toasty)\r\n    }\r\n  })}\r\n  function addStudentToDB(event) {\r\n    event.preventDefault();\r\n    var addbtn = document.getElementById(\"add-student-btn\");\r\n    var response;\r\n    token = localStorage.getItem('token');\r\n    fetch(`${BACKENDSERVER}/api/students/create`, {method: 'POST', headers: { 'Content-Type': 'application/json',\r\n    'Authorization':`${token}` }, body: JSON.stringify(addStudent)})\r\n    .then(res=>{\r\n      response = res;\r\n      return res.json();})\r\n    .then(body => {\r\n      if (response.status === 200) {\r\n        toast.success(body.message,toasty)\r\n        clearAddData();\r\n      } else {\r\n        toast.error(body.message,toasty)\r\n  }\r\n    fetchStudents();}).catch(err => console.log(err))\r\n\r\n};\r\nvar index;\r\n  return (\r\n    <div id=\"dashboard-root\">\r\n      {/*<button onClick={() => toast.warn(\"etouhetotusehiesu\",toasty)}>toasty pls</button>*/}\r\n      <ToastContainer />\r\n      <h1>Student Dashboard</h1>\r\n      <button id=\"add-student-btn\" onClick={() => {if (!addStudent.show) {getLastId();};setAddStudent(prevState=>({...prevState,'show':!addStudent.show}));}}>{addStudent.show?\"Close Menu\":\"Add Student\"}</button>\r\n      <button id=\"delete-students\" onClick={() => {\r\n        const checkedStudents = students.filter((student) => student.checked)\r\n        var response;\r\n        fetch(`${BACKENDSERVER}/api/students`, {method: 'DELETE', headers: { 'Content-Type': 'application/json',\r\n    'Authorization':`${token}` }, body: JSON.stringify(checkedStudents.map((student) => student._id))})\r\n        .then(res => {response = res;\r\n          return res.json();})\r\n        .then(data => {\r\n          if (response.status===200) {\r\n          return toast.success(data.message,toasty);}\r\n          else{toast.warning(data.message,toasty);}})\r\n        .catch(err => console.log(err))\r\n        fetchStudents();\r\n      }}>Delete Checked Students</button>\r\n      {addStudent.show ? (\r\n      <div id=\"add-student-div\">\r\n      <table id='add-student-table'>\r\n        <thead>\r\n        <tr>\r\n          <td className='w3'>\r\n            <div id=\"addRemoveStudents-div\">\r\n              <button\r\n                id=\"addStudentToDB\"\r\n                className=\"editStudent\"\r\n                onClick={(event) => {addStudentToDB(event);document.getElementById(\"removeAddStudent\").click();}}>\r\n                <img src={require(\"../components/check.png\")} alt=\"check add student\" />\r\n              </button>\r\n              <button id=\"removeAddStudent\" className=\"editStudent\" onClick={() => clearAddData()}>\r\n                <img src={require(\"../components/cancel.png\")} alt=\"cancel add student\" />\r\n              </button>\r\n            </div>\r\n          </td>\r\n          <td className=\"w4\">\r\n            <input\r\n              className=\"add-student\"\r\n              id=\"_id\"\r\n              placeholder=\"regNo\"\r\n              onChange={(event) => handleAddStudent(event)}\r\n              value={String(addStudent._id)}\r\n            ></input>\r\n          </td>\r\n          <td className=\"w13_5\">\r\n            <input\r\n              className=\"add-student\"\r\n              id=\"name\"\r\n              placeholder=\"name\"\r\n              onChange={(event) => handleAddStudent(event)}\r\n            ></input>\r\n          </td>\r\n          <td className=\"w8\">\r\n            <input\r\n              className=\"add-student\"\r\n              id=\"joining\"\r\n              placeholder=\"Joining\"\r\n              onChange={(event) => handleAddStudent(event)}\r\n            ></input>\r\n          </td>\r\n          <td className=\"w7\">\r\n            <input\r\n              className=\"add-student\"\r\n              id=\"program\"\r\n              placeholder=\"Program\"\r\n              onChange={(event) => handleAddStudent(event)}\r\n            ></input>\r\n          </td>\r\n          <td className=\"w3\">\r\n            <input\r\n              className=\"add-student\"\r\n              id=\"gpa\"\r\n              placeholder=\"gpa\"\r\n              onChange={(event) => handleAddStudent(event)}\r\n            ></input>\r\n          </td>\r\n          <td className=\"w6\">\r\n            <input\r\n              className=\"add-student\"\r\n              id=\"section\"\r\n              placeholder=\"section\"\r\n              onChange={(event) => handleAddStudent(event)}\r\n            ></input>\r\n          </td>\r\n          <td className='w3'></td>\r\n        </tr>\r\n        </thead>\r\n      </table>\r\n      </div>\r\n      )\r\n      ://////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n      <div id=\"add-student\"></div>}\r\n      <table id='main-table'>\r\n      <thead>\r\n        <tr>\r\n          <td className=\"w3\">Delete</td>\r\n          <td className=\"w4\">Reg No.</td>\r\n          <td className=\"w13_5\">Name</td>\r\n          <td className=\"w8\">Joining</td>\r\n          <td className=\"w7\">Program</td>\r\n          <td className=\"w3\">gpa</td>\r\n          <td className=\"w3\">Section</td>\r\n          <td className=\"w3\">Edit</td>\r\n        </tr>\r\n      </thead>\r\n        <tbody>\r\n          {students.map((student) => (student.settings?\r\n            <tr key = {student._id}>\r\n            <td>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={Boolean(student.checked)}\r\n                onChange={(event) => {\r\n                  const updatedStudents = students.map((s) =>\r\n                    s._id === student._id ? { ...s, checked: event.target.checked } : s\r\n                  );\r\n                  console.log(updatedStudents);\r\n                  setStudents(updatedStudents);\r\n                }}\r\n              />\r\n            </td>\r\n            <td>{student._id}</td>{/*      const { _id,name, joining, program, gpa, section} = req.body;*/}\r\n           <td><input type=\"text\" onChange={(event) => handleUpdateStudent(event,student._id)} target='name' placeholder={student.name}/></td>\r\n            <td><input type=\"text\" onChange={(event) => handleUpdateStudent(event,student._id)} target='joining' placeholder={student.joining}/></td>\r\n            <td><input type=\"text\" onChange={(event) => handleUpdateStudent(event,student._id)} target='program' placeholder={student.program}/></td>\r\n            <td><input type=\"text\" onChange={(event) => handleUpdateStudent(event,student._id)} target='gpa' placeholder={student.gpa[\"$numberDecimal\"]}/></td>\r\n            <td><input type=\"text\" onChange={(event) => handleUpdateStudent(event,student._id)} target='section' placeholder={student.section}/></td>\r\n            <td><div id='updateDiv'>\r\n              <button onClick={() => {\r\n                setUpdateStudents(prevState => prevState.filter((s) => s._id !== student._id))\r\n                setStudents(students.map((s) =>\r\n                s._id === student._id ? { ...s, settings: false } : s\r\n                ));\r\n              }} id='updateCancel'><img src={require(\"../components/cancel.png\")} alt='reject update'></img></button>\r\n              <button onClick={() => fetchUpdateStudents(student._id)}><img src={require(\"../components/check.png\")} alt='accept update'></img></button>\r\n            </div></td>\r\n            </tr>\r\n          :////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n            <tr key = {student._id}>\r\n            <td>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={Boolean(student.checked)}\r\n                onChange={(event) => {\r\n                  const updatedStudents = students.map((s) =>\r\n                    s._id === student._id ? { ...s, checked: event.target.checked } : s\r\n                  );\r\n                  setStudents(updatedStudents);\r\n                }}\r\n              />\r\n            </td>\r\n              <td>{student._id}</td>\r\n              <td>{student.name}</td>\r\n              <td>{student.joining}</td>\r\n              <td>{student.program}</td>\r\n              <td>{student.gpa[\"$numberDecimal\"]}</td>\r\n              <td>{student.section}</td>\r\n              <td><button className=\"editStudent\" onClick={(event) => {\r\n              setUpdateStudents(prevState => [...prevState,student])\r\n              var tempStudents = [...students]\r\n              index=students.findIndex((studentF) => studentF._id===student._id)\r\n              tempStudents[index].settings=tempStudents[index].settings?false:true\r\n              setStudents(tempStudents)\r\n            }}><img src={require(\"../components/settings.png\")} alt=\"edit row\" /></button></td></tr>          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )}\r\nexport default Dashboard","C:\\Users\\vedic\\OneDrive\\Desktop\\webDev\\mainsite\\studentManagement-frontend\\src\\pages\\Login.js",[],[],{"ruleId":"25","severity":1,"message":"26","line":58,"column":6,"nodeType":"27","endLine":58,"endColumn":8,"suggestions":"28"},{"ruleId":"29","severity":1,"message":"30","line":100,"column":9,"nodeType":"31","messageId":"32","endLine":100,"endColumn":15},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fetchStudents'. Either include it or remove the dependency array.","ArrayExpression",["33"],"no-unused-vars","'addbtn' is assigned a value but never used.","Identifier","unusedVar",{"desc":"34","fix":"35"},"Update the dependencies array to be: [fetchStudents]",{"range":"36","text":"37"},[2464,2466],"[fetchStudents]"]